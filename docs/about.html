<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>General information</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FOSSILPOL workflow webpage</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About</a>
</li>
<li>
  <a href="about.html">General Information</a>
</li>
<li>
  <a href="step_by_step_guide.html">A step-by-step guide</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">General information</h1>

</div>


<p>Here we present the detailed technical guide for the FOSSILPOL workflow which is an R-based modular workflow to process global palaeoecological pollen data (Supplementary Fig. 1). More detailed information can be found on the FOSSILPOL website [link].</p>
<p>The FOSSILPOL workflow has been developed during the ERC project called the “Humans on Planet Earth” (HOPE) team at the University of Bergen.</p>
<p>The goal of the FOSSILPOL workflow is to process multiple fossil pollen sequences to create a comprehensive, standardized dataset compilation, ready for multi-sequence and multi-proxy analyses. The FOSSILPOL workflow is coded as an RStudio project (in the R environment), which should be customised by the user for a specific research project.</p>
<p>The FOSSILPOL workflow (referred to as “the Workflow” from here on) is accessible in two ways a) If a user has a GitHub account, the easiest way is to create his/her own GitHub repo using this GitHub template [link]; b) A user can obtain the newest release of the Workflow as a zip file from ZENODO [link]. The R project consists of codes with individual scripts and functions. All scripts are stored in the <code>R</code> folder. After obtaining the workflow, the R project will have the following structure:</p>
<p>Code block 1</p>
<pre><code>project
│
│   README.md
│   .Rprofile
│   .gitignore  
│   Workflow_template.Rproj
│
└───Data
│   │
│   └───Input
│       │
│       └───Spatial
│           │
│           └───Biomes_shapefile   
│           │   │
│           │   └───WWF
│           │
│           └───Calibration_curves_shapefile   
│           │
│           └───Countries_shapefile
│           │  
│           └───Harmonization_regions_shapefile
│           │
│           └───Postbomb_shapefile
│           │
│           └───Regions_shapefile
│
└───R
│   │
│   │   ___Init_project___.R
│   │   00_Config_file.R
│   │   00_Master.R
│   │
│   └───01_Data_processing
│   │   │   │
│   │   │   │   Run_01.R
│   │   │
│   │   └───01_Neotoma_source
│   │   │   │
│   │   │   │   Run_01_01.R
│   │   │   │   01_Download_neotoma.R
│   │   │   │   02_Create_initial_tibble.R
│   │   │   │   03_Filter_dep_env.R
│   │   │   │   04_Prepare_chron_control_tables.R
│   │   │   │   05_Extract_raw_pollen_data.R
│   │   │   
│   │   └───02_Private_source
│   │   │   │
│   │   │   │   Run_01_02.R
│   │   │   │   01_Import_private_data.R
│   │   │
│   │   └───03_Merging_and_filtering
│   │   │   │
│   │   │   │   Run_01_03.R
│   │   │   │   01_Merge_datasets.R
│   │   │
│   │   └───04_Chronologies
│   │   │   │
│   │   │   │   Run_01_04.R
│   │   │   │   01_Prepare_chron_control_tables.R
│   │   │   │   02_Run_age_depth_models.R
│   │   │   │   03_Predict_ages.R
│   │   │   │   04_Save_AD_figures.R
│   │   │   │   05_Merge_and_sort_bchron.R
│   │   │
│   │   └───05_Harmonisation
│   │   │   │
│   │   │   │   Run_01_05.R
│   │   │   │   01_Harmonisation.R
│   │   │
│   │   └───06_Level_filtering
│   │   │   │
│   │   │   │   Run_01_06.R
│   │   │   │   01_Level_filtering.R
│   │   │
│   │   └───07_Outputs
│   │       │
│   │       │   Run_01_04.R
│   │       │   01_Prepare_chron_control_tables.R
│   │       │   02_Run_age_depth_models.R
│   │       │   03_Predict_ages.R
│   │
│   └───02_Main_analyses
│   │   │
│   │   │   Run_02.R
│   │
│   └───03_Supplementary_analyses
│   │   │
│   │   │   Run_03.R
│   │
│   └───Functions
│       │
│       │extract.config.data.R
│
└───renv
    │
    │   .gitignore
    │   activate.R
    │   library_list.lock
    │   settings.dcf</code></pre>
<div id="how-to-set-up" class="section level2">
<h2>How to set up</h2>
<p>Once a user obtains their own version of the Workflow, there are several steps to be done before using it.</p>
<ul>
<li><p>Update R and R-studio.</p></li>
<li><p>Execute all individual steps with the <code>___Init_project___.R</code> script. This will result in the preparation of all packages using the <code>renv</code> package, which is R dependency management to your projects.</p></li>
<li><p>Set up your preferences by editing the <code>00_Config_file.R</code> script (referred to as “Config file” from here on). The Config file is a script, where all settings and criteria, used throughout the project, are defined. In addition, it also prepares the general functionality of the current session by loading the required packages and saving all settings throughout the project. The points of focus for users are flagged using [USER]. More info on the Config file is given in the section “A step-by-step guide to data processing”</p></li>
<li><p>Execute the<code>00_Master.R</code> script to run the whole project by accessing individual subroutine scripts (see next sections below).</p></li>
<li><p>If wanted, the user can add additional project-specific scripts in <code>02_Main_analyses</code> and <code>03_Supplementary_analyses</code> folders.</p></li>
</ul>
</div>
<div id="cascade-of-r-scripts" class="section level2">
<h2>Cascade of R scripts</h2>
<p>This Workflow is constructed using a “script cascade”. That means that the <code>00_Master.R script</code>, located within <code>R</code> folder, executes all scripts within sub-folders of <code>R</code> folder (<code>R/01_Data_processing/Run_01.R</code>, <code>R/02_Main_analyses/Run_02.R</code>, and <code>R/03_Supplementary_analyses/Run_03.R</code>). Those scripts, in turn, execute all their sub-folders (e.g. <code>R/01_Data_processing/Run_01.R</code> executes <code>R/01_Data_processing/01_Neotoma_source/Run_01_01.R</code>, <code>R/01_Data_processing/02_Private_source/Run_01_02.R</code>, …).</p>
<p>Code block 2</p>
<pre><code>R
│
│   00_Master.R
│
└───01_Data_processing
        │
        │   Run_01.R
        │
        └───01_Neotoma_source
            │
            │   Run_01_01.R</code></pre>
</div>
<div id="data-storage" class="section level2">
<h2>Data storage</h2>
<p>The Workflow will produce several files including temporal output files, “stop-check” tables, and outputs (figures, data assembly, etc).</p>
<ol style="list-style-type: decimal">
<li>Temporal output files: The Workflow is set up in a way that temporal (in-progress) data files are saved at various stages of the Workflow. Each file will contain the date of creation for easier organisation. When run multiple times, the Workflow will automatically detect if there are any changes in a selected file and only overwrite it if an updated file can be produced. This also means that the user does not have to re-run the whole Workflow but can only re-run specific parts. As the total size of the files can become substantially large, the user can specify if all files should be stored within the project folder (default) or in another directory (specified in using <code>data_storage_path</code> in Config file). After such specification, and running the <code>00_Config_file.R</code> script, there will be an additional folder structure created:</li>
</ol>
<p>Code block 3</p>
<pre><code>data_storage_path
│
└───Data
│   │
│   └───Input
│   │   │
│   │   └───Chronology_setting
│   │   │   │
│   │   │   └───Bchron_crash
│   │   │   │
│   │   │   └───Chron_control_point_types
│   │   │   │
│   │   │   └───Percentage_radiocarbon
│   │   │
│   │   └───Depositional_environment
│   │   │   │
│   │   │   └───Neotoma
│   │   │   │
│   │   │   └───Other
│   │   │
│   │   └───Eco_group
│   │   │
│   │   └───Harmonisation_tables
│   │   │
│   │   └───Neotoma_download
│   │   │
│   │   └───Potential_duplicates
│   │   │
│   │   └───Private
│   │   │
│   │   └───Regional_age_limits
│   │   
│   └───Personal_database_storage
│   │
│   └───Processed
│       │
│       └───Bchron
│       │   │
│       │   └───Bchron_tibble_prepared
│       │   │
│       │   └───Full_outputs
│       │   │
│       │   └───Predicted_ages
│       │   │
│       │   └───Temporary_output
│       │
│       └───Data_filtered
│       │
│       └───Data_harmonised
│       │
│       └───Data_merged
│       │
│       └───Data_with_chronologies
│       │
│       └───Neotoma_processed
│       │   │
│       │   └───Neotoma_chron_control
│       │   │
│       │   └───Neotoma_dep_env
│       │   │
│       │   └───Neotoma_meta
│       │
│       └───Private
│ 
└───Outputs
    │
    └───Data
    │
    └───Figures
    │   │
    │   └───Bchron
    │   │
    │   └───Pollen_diagrams
    │   
    └───Tables
        │
        └───Meta_and_references</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>“Stop-checks” CSV tables (Supplementary Figure 1): While running the workflow, there will be several times that a user will be asked to check and where necessary adjust produced CSV tables to subsequently continue with the Workflow (i.e. re-run script). This is done so that the user is obliged to check produced intermediate results before continuing. For example, at a certain point, the Workflow will produce a list of all ecological groups detected within the dataset compilation obtained from Neotoma. A user then has to edit the mentioned CSV table and specify which ecological groups should be kept (include = TRUE) and which should be filtered out (include = FALSE). There are several stop-checks throughout the workflow (Supplementary Figure 1)</p></li>
<li><p>Workflow final outputs:</p></li>
</ol>
<ul>
<li>a ready-to-use, taxonomically harmonised and standardised compilation of fossil pollen data, ready for the analytical stage</li>
<li>Age-depth model of each sequence</li>
<li>Pollen diagram of each sequence</li>
<li>Metadata table related to main data contributor, contact information, and corresponding publications for citation purposes of the used datasets.</li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
