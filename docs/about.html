<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>General information</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FOSSILPOL project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="about.html">General Information</a>
</li>
<li>
  <a href="step_by_step_guide.html">A step-by-step guide</a>
</li>
<li>
  <a href="contributing.html">Contribute</a>
</li>
<li>
  <a href="road_map.html">Project roadmap</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">General information</h1>

</div>


<p>Here we present the detailed technical guide for the FOSSILPOL workflow which is an R-based modular workflow to process global palaeoecological pollen data (Supplementary Fig. 1). The general guide is described in the paper titled “<em>A guide to process and standardise global palaeoecological pollen datasets for large-scale synthesis</em>”, published in <a href="https://onlinelibrary.wiley.com/journal/14668238">GEB</a>. More detailed information and updates can be found on the <a href="https://hope-uib-bio.github.io/FOSSILPOL-website/">FOSSILPOL website</a>.</p>
<p>The goal of the FOSSILPOL workflow is to process multiple fossil pollen sequences to create a comprehensive, standardised dataset compilation, ready for multi-sequence and multi-proxy analyses. The FOSSILPOL workflow is coded as an RStudio project (in the R environment), which should be customised by the user for a specific research project.</p>
<p>The FOSSILPOL workflow has been developed during the ERC project called the “Humans on Planet Earth” (HOPE) team at the University of Bergen. <br></br></p>
<div id="table-of-contents" class="section level2">
<h2>Table of Contents</h2>
<ol style="list-style-type: decimal">
<li><a href="#get">How to obtain the workflow</a></li>
<li><a href="#setup">Set up</a></li>
<li><a href="#cascade">Cascade of scripts</a> <br></br></li>
</ol>
</div>
<div id="how-to-obtain-the-workflow" class="section level1">
<h1>How to obtain the workflow <a name = "get"></a></h1>
<p>The FOSSILPOL workflow (referred to as “the Workflow” from here on) is accessible in two ways:</p>
<ol style="list-style-type: decimal">
<li><p>If a user has a GitHub account, the easiest way is to create your own GitHub repo using this <a href="https://github.com/HOPE-UIB-BIO/FOSSILPOL-workflow">GitHub template</a>. More details about how to use GitHub templates are on <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template">GitHub Docs</a>.</p></li>
<li><p>A user can obtain the newest release of the Workflow as a zip file from ZENODO [link].</p></li>
</ol>
<p>The R project consists of codes with individual scripts and functions. All scripts are stored in the <code>R</code> folder. After obtaining the workflow, the R project will have the following structure:</p>
<p><strong>Code block 1</strong></p>
<pre><code>project
│
│   README.md
│   Rprofile
│   gitignore  
│   Workflow_template.Rproj
│
└───Data
│   │
│   └───Input
│       │
│       └───Spatial
│           │
│           └───Biomes_shapefile   
│           │   │
│           │   └───WWF
│           │
│           └───Calibration_curves_shapefile   
│           │
│           └───Countries_shapefile
│           │  
│           └───Harmonisation_regions_shapefile
│           │
│           └───Postbomb_shapefile
│           │
│           └───Regions_shapefile
│
└───R
│   │
│   │   ___Init_project___.R
│   │   00_Config_file.R
│   │
│   └───01_Data_processing
│   │   │   │
│   │   │   │   Master_run_01.R
│   │   │
│   │   └───01_Neotoma_source
│   │   │   │
│   │   │   │   Run_01_01.R
│   │   │   │   01_Download_neotoma.R
│   │   │   │   02_Extract_samples.R
│   │   │   │   03_Filter_dep_env.R
│   │   │   │   04_Extract_chron_control_tables.R
│   │   │   │   05_Extract_raw_pollen_data.R
│   │   │   
│   │   └───02_Private_source
│   │   │   │
│   │   │   │   Run_01_02.R
│   │   │   │   01_Import_private_data.R
│   │   │
│   │   └───03_Merging_and_geography
│   │   │   │
│   │   │   │   Run_01_03.R
│   │   │   │   01_Merge_datasets.R
│   │   │
│   │   └───04_Chronologies
│   │   │   │
│   │   │   │   Run_01_04.R
│   │   │   │   01_Prepare_chron_control_tables.R
│   │   │   │   02_Run_age_depth_models.R
│   │   │   │   03_Predict_ages.R
│   │   │   │   04_Save_AD_figures.R
│   │   │   │   05_Merge_chron_output.R
│   │   │
│   │   └───05_Harmonisation
│   │   │   │
│   │   │   │   Run_01_05.R
│   │   │   │   01_Harmonisation.R
│   │   │
│   │   └───06_Main_filtrering
│   │   │   │
│   │   │   │   Run_01_06.R
│   │   │   │   01_Level_filtering.R
│   │   │
│   │   └───07_Outputs
│   │       │
│   │       │   Run_01_07.R
│   │       │   01_Pollen_diagrams.R
│   │       │   02_Save_assembly.R
│   │       │   03_Save_references.R
│   │
│   └───02_Main_analyses
│   │   │
│   │   │   Master_run_02.R
│   │
│   └───03_Supplementary_analyses
│   │   │
│   │   │   Master_run_03.R
│   │
│   └───Functions
│       │
│       │ example_function.R
│
└───renv
    │
    │   gitignore
    │   activate.R
    │   library_list.lock
    │   settings.dcf</code></pre>
<p><br></br></p>
<div id="set-up" class="section level2">
<h2>Set up <a name = "setup"></a></h2>
<p>Once a user obtains their own version of the Workflow, there are several steps to be done before using it:</p>
<ul>
<li><p>Update R and R-studio. There are many guides on how to do so (e.g. <a href="https://jennhuck.github.io/workshops/install_update_R.html">here</a>)</p></li>
<li><p>Execute all individual steps with the <code>___Init_project___.R</code> script. This will result in the preparation of all packages using the <code>renv</code> package, which is an R dependency management of your projects (more info about <code>renv</code> <a href="https://rstudio.github.io/renv/articles/renv.html">here</a>). This step can take a substantial amount of time. For any issues with <code>___Init_project___.R</code>, see the <em><a href="contributing.html#issues">Issue</a></em> section on the FOSSILPOL website.</p></li>
<li><p>Set up your preferences by editing the <code>00_Config_file.R</code> script (referred to as <em>“Config file”</em> from here on). The Config file is a script where all settings and criteria used throughout the project are predefined by the user before running the Workflow. In addition, it prepares the current session by loading the required packages and saving all settings throughout the project. The points of focus for users are flagged by “<strong>[USER]</strong>” in the Config file, meaning that these are criteria that need to be checked by the user. More info on the Config file is given in the section “A step-by-step guide to data processing”. The crucial points are:</p>
<ul>
<li><p><code>data_storage_path</code> within <em>section 4</em> - as the workflow produces several large files, a user can specify the directory where such files will be placed. Note that the default place is within the project.</p></li>
<li><p><em>section 5</em> - there are many variables important for data selection and filtering of the final data assembly.</p></li>
</ul></li>
<li><p>Run <code>R/01_Data_processing/Master_run_01.R</code> to run the whole data processing part of the project (be ready for <strong>“stop-checks”</strong>, see below). Alternatively, the user can run each script individually. After all “stop-checks” are resolved, the Workflow can be run as a whole to produce the standardised dataset compilation, ready for multi-sequence and multi-proxy analyses.</p></li>
<li><p>If desired, the user can run additional project-specific scripts in the <code>02_Main_analyses</code> and <code>03_Supplementary_analyses</code> folders to analyse the data compilation. <br></br></p></li>
</ul>
</div>
<div id="cascade-of-r-scripts" class="section level2">
<h2>Cascade of R scripts <a name = "cascade"></a></h2>
<p>This Workflow is constructed using a “script cascade”. This means that the <code>Master_run_01.R</code>, located within <code>R /01_Data_processing/</code> folder, executes all scripts within sub-folders of the <code>R /01_Data_processing/</code> folder, which in turn, execute all their sub-folders (e.g., <code>R/01_Data_processing/01_Neotoma_source/Run_01_01.R</code> executes <code>R/01_Data_processing/01_Neotoma_source/01_Download_neotoma.R</code>, , <code>R/01_Data_processing/01_Neotoma_source /02_Extract_samples.R</code>, …). See Code block 2.</p>
<p>Therefore, a user can run the data processing section of the project executing <code>R/01_Data_processing/Master_run_01.R</code>script, or run individual sections by executing individual scripts within sections. Alternatively, the user can run the Workflow subsection as a whole for instance running, <code>R/01_Data_processing/01_Neotoma_source/Run_01_01.R</code>, and not <code>R/01_Data_processing/01_Neotoma_source/01_Download_neotoma.R</code>, and then <code>R/01_Data_processing/01_Neotoma_source /02_Extract_samples.R</code>, etc.</p>
<p><strong>Code block 2</strong></p>
<pre><code>R
│
└───01_Data_processing
        │
        │   Master_run_01.R
        │
        └───01_Neotoma_source
            │
            │   Run_01_01.R
                │
                │   01_Download_neotoma.R
                │   02_Extract_samples.R
                │   03_Filter_dep_env.R
                │   04_Extract_chron_control_tables.R
                │   05_Extract_raw_pollen_data.R
</code></pre>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
